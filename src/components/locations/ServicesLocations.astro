---
import Hero from "../../assets/photos/visuals/Visuel-11.jpg";
import ShapeFileSVG from "../../assets/svg/shape-file-02.svg";
---

<section id="services-locations">
    <div class="px-8 lg:px-16">
        <!-- Top: Title + Intro with image -->
        <div class="grid md:grid-cols-3 lg:gap-12">
            <div class="md:col-span-2">
                <h2 class="text-3xl lg:text-5xl leading-tight">
                    Tout ce dont vous avez
                    <span class="block">besoin, <span class="font-semibold">sans superflu.</span></span>
                </h2>
                <p class="mt-12 pr-2 text-sm md:text-md lg:text-xl max-w-sm md:max-w-md lg:max-w-lg">
                    Chez Toutoléron, pas de catalogue, pas d’hésitation et pas
                    de perte de temps. Nous avons déjà sélectionné du matériel
                    informatique moyen-haut de gamme éprouvé et certifié, en
                    partenariat avec les meilleures marques professionnelles.
                </p>
                <div class="mt-10 text-primary font-semibold tracking-wide uppercase text-md">Ce qui est inclus</div>
            </div>

            <div id="services-locations-hero-collage" class="hidden lg:block relative">
                <img src={ShapeFileSVG.src} alt="Illustration" class="w-full h-auto -translate-y-15" />
                <div class="absolute -inset-10 -translate-x-15 translate-y-10">
                    <img
                            src={Hero.src}
                            class="w-full h-auto object-cover rounded-2xl shadow-sm services-locations-hero"
                            alt="Accueil au secrétariat d'un cabinet médical"
                    />
                </div>
            </div>
        </div>

        <div class="mt-4 grid md:grid-cols-2 gap-6">
            <!-- Matériel -->
            <div class="card border border-primary rounded-2xl">
                <div class="card-body">
                    <h3 class="text-xl font-semibold">Matériel</h3>
                    <ul class="mt-3 list-disc pl-5 space-y-2">
                        <li>Unités centrales pro (dont tout-en-un TERRA)</li>
                        <li>Ordinateurs portables (ASUS)</li>
                        <li>Écrans cabinet</li>
                        <li>Clavier / souris (Logitech)</li>
                        <li>Imprimante (HP)</li>
                        <li>Scanner (FUJITSU)</li>
                        <li>Lecteur de carte CPS &amp; Vitale</li>
                    </ul>
                </div>
            </div>

            <!-- Services -->
            <div class="card border border-primary rounded-2xl">
                <div class="card-body">
                    <h3 class="text-xl font-semibold">Services</h3>
                    <ul class="mt-3 list-disc pl-5 space-y-2">
                        <li>Livraison, installation, renouvellement, maintenance</li>
                        <li>Gestion de l’antivirus et prise en charge des infestations</li>
                        <li>Surveillance des composants à distance et nettoyage système régulier</li>
                        <li>Assistance téléphonique à l’usage</li>
                        <li>Prêt de matériel sous 48 h en cas de défaut</li>
                        <li>Réinstallation WEDA lors d’un changement de poste</li>
                        <li>Conseil &amp; coordination avec les intervenants extérieurs</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        if (typeof window !== "undefined") {
            const collage = document.getElementById("services-locations-hero-collage");

            if (collage) {
                const img = collage.querySelector(".services-locations-hero");

                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                // La section entre dans le viewport → joue l'anim
                                img?.classList.add("is-visible");
                            } else {
                                // La section sort du viewport → reset à l'état initial
                                img?.classList.remove("is-visible");
                            }
                        });
                    },
                    { threshold: 0.3 }
                );

                observer.observe(collage);
            }
        }
    </script>
    <style>
        /* État initial : légèrement décalée vers la DROITE, un peu réduite, transparente */
        .services-locations-hero {
            transform: translateX(3rem) translateY(0.75rem) scale(0.9);
            opacity: 0;

            transition:
                    transform 1500ms cubic-bezier(0.22, 1, 0.36, 1),
                    opacity 1500ms ease-out;
        }

        /* État final : position normale dans le ShapeFile */
        #services-locations-hero-collage .services-locations-hero.is-visible {
            transform: translateX(0) translateY(0) scale(1);
            opacity: 1;
        }
    </style>
</section>
