---
import EmojiLock from "../../assets/emojis/emoji-lock.png";
import EmojiComputer from "../../assets/emojis/emoji-computer.png";
import EmojiGear from "../../assets/emojis/emoji-gear.png";
import CheckSVG from "../../assets/svg/check.svg";
import ShapeFile from "../../assets/svg/shape-file-01.svg";
import Hero from "../../assets/illustrations/TOUTOLERON_illu_location_installation_maintenance.png";


const footerDescription = "Un matériel toujours performant, livré, installé et renouvelé sans " +
    "contrainte. Tout est inclus dans un abonnement sur-mesure, sans apport " +
    "ni dépôt de garantie.";
---

<!-- Solutions section -->
<section>
    <div class="px-6 lg:px-16">
        <!-- Solutions cards title -->
        <div class="mt-14 lg:mt-16 text-center">
            <h3 class="text-3xl sm:text-5xl">
                Vos besoins, <span class="font-semibold">un écosystème de solutions.</span>
            </h3>
        </div>

        <!-- Three solution cards -->
        <div class="mt-8 grid gap-4 lg:grid-cols-3">
            <div class="bg-accent text-accent-content rounded-2xl p-5 sm:p-6 shadow-sm">
                <div class="flex flex-col items-center justify-center">
                    <img src={EmojiComputer.src} alt="" class="h-8 w-8"/>
                    <p class="text-center text-sm sm:text-base font-medium">
                        Location et maintenance<br/>de votre équipement informatique
                    </p>
                </div>
            </div>
            <div class="bg-accent text-accent-content rounded-2xl p-5 sm:p-6 shadow-sm">
                <div class="flex flex-col items-center justify-center">
                    <img src={EmojiGear.src} alt="" class="h-8 w-8"/>
                    <p class="text-center text-sm sm:text-base font-medium">
                        Paramétrage et formation<br/>au logiciel WEDA
                    </p>
                </div>
            </div>
            <div class="bg-accent text-accent-content rounded-2xl p-5 sm:p-6 shadow-sm">
                <div class="flex flex-col items-center justify-center">
                    <img src={EmojiLock.src} alt="" class="h-8 w-8"/>
                    <p class="text-center text-sm sm:text-base font-medium">
                        Cybersécurité et conformité<br/>pour votre cabinet
                    </p>
                </div>
            </div>
        </div>

        <div class="h-8"/>

        <!-- Footer callout -->
        <div class="py-8 grid lg:grid-cols-5 gap-16 md:gap-32 items-center">

            <!-- Illustration block -->
            <div id="solutions-collage" class="hidden lg:block relative lg:col-span-2">
                <img src={ShapeFile.src} alt="" class="w-full h-auto" />
                <div class="absolute inset-20 -right-20 flex flex-col justify-center">
                    <img
                        src={Hero.src}
                        alt="Illustration maintenance"
                        class="w-full h-auto block solutions-hero"
                    />
                </div>
            </div>

            <!-- Content -->
            <div class="p-0 md:p-8 lg:p-0 lg:col-span-3">
                <div class="badge badge-outline badge-primary rounded-full border-2 mb-4 font-semibold text-xs sm:text-sm md:text-md">
                    LOCATION & MAINTENANCE
                </div>
                <h3 class="text-3xl sm:text-4xl leading-tight whitespace-pre-line">
                    Louez et simplifiez la gestion
                    <span class="font-semibold">de votre équipement informatique.</span>
                </h3>
                <p class="mt-4 whitespace-pre-line">{footerDescription}</p>

                <ul class="mt-6 space-y-3">
                    <li class="flex items-start gap-3">
                        <img src={CheckSVG.src} alt="" class="h-5 w-5 mt-0.5"/>
                        <span>Frais de livraison, d’installation et de renouvellement inclus.</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <img src={CheckSVG.src} alt="" class="h-5 w-5 mt-0.5"/>
                        <span>Garantie complète du matériel pendant toute la durée de la location.</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <img src={CheckSVG.src} alt="" class="h-5 w-5 mt-0.5"/>
                        <span>Accès direct et illimité à notre service client.</span>
                    </li>
                </ul>

                <div class="my-8">
                    <a class="btn btn-accent hover:bg-accent/80 rounded-full p-6 text-xl shadow-none border-0" href="/locations">Je découvre</a>
                </div>
            </div>
        </div>
    </div>
  <script>
    if (typeof window !== "undefined") {
      const collage = document.getElementById("solutions-collage");

      if (collage) {
        const img = collage.querySelector(".solutions-hero");

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                // La section entre dans le viewport → joue l'anim
                img?.classList.add("is-visible");
              } else {
                // La section sort du viewport → reset à l'état initial
                img?.classList.remove("is-visible");
              }
            });
          },
          { threshold: 0.3 }
        );

        observer.observe(collage);
      }
    }
  </script>
  <style>
    /* État initial : légèrement décalée vers la DROITE, un peu réduite, transparente */
    .solutions-hero {
      transform: translateX(3rem) translateY(0.75rem) scale(0.9);
      opacity: 0;

      transition:
        transform 1500ms cubic-bezier(0.22, 1, 0.36, 1),
        opacity 1500ms ease-out;
    }

    /* État final : position normale dans le ShapeFile (comme ton rendu actuel) */
    #solutions-collage .solutions-hero.is-visible {
      transform: translateX(0) translateY(0) scale(1);
      opacity: 1;
    }
  </style>
</section>